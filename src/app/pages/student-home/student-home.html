<section class="home-wrap">
  <header class="top-bar">
    <button class="menu-toggle" (click)="toggleSidebar()">
      <img src="/icon/Hamburger_MD.png" alt="">
    </button>

    <!-- Barra de b√∫squeda -->
    <div class="search-bar">
      <div class="search">
        <span class="ico">üîç</span>
        <input
          type="text"
          placeholder="Busca un asesor"
          [formControl]="filtros.controls.search"
        />
        <button
          class="clear"
          *ngIf="filtros.controls.search.value"
          (click)="filtros.controls.search.setValue('')"
        >
          ‚úï
        </button>
      </div>

      <div class="filters">
        <div class="select">
          <select [formControl]="filtros.controls.lugar">
            <option value="">Lugar</option>
            <option
              *ngFor="let l of lugares; trackBy: trackByStr"
              [value]="l"
            >
              {{ l }}
            </option>
          </select>
        </div>
        <div class="select">
          <select [formControl]="filtros.controls.nivel">
            <option value="">Nivel</option>
            <option
              *ngFor="let n of niveles; trackBy: trackByStr"
              [value]="n"
            >
              {{ n }}
            </option>
          </select>
        </div>
        <div class="select">
          <select [formControl]="filtros.controls.materia">
            <option value="">Materias</option>
            <option
              *ngFor="let m of materias; trackBy: trackByStr"
              [value]="m"
            >
              {{ m }}
            </option>
          </select>
        </div>
        <button class="refresh" (click)="clearFilters()" title="Limpiar filtros">‚Üª</button>
      </div>
    </div>

    <div class="right-actions">
      <img src="/icon/Bell.png" alt="">
      <div class="avatar"></div>
    </div>
  </header>

  <!-- Sidebar lateral -->
  <aside class="sidebar" [class.sidebar-open]="isSidebarOpen">
    <div class="sidebar-header">
      <img class="agora-icon" src="/agora_icon.png" alt="">
      <button class="close-menu-btn" (click)="closeSidebar()">
        <span class="material-icons"><</span>
      </button>
    </div>

    <nav class="sidebar-menu">
      <a href="#" (click)="closeSidebar()" class="menu-item active">
        <img src="/icon/home.png" alt="">
        Inicio
      </a>
      <a href="#" (click)="closeSidebar()" class="menu-item">
        <img src="/icon/fav.png" alt="">
        Favoritos
      </a>
      <a href="#" (click)="closeSidebar()" class="menu-item">
        <img src="/icon/chat.png" alt="">
        Chats
      </a>
      <a href="#" (click)="closeSidebar()" class="menu-item">
        <img src="/icon/solicitud.png" alt="">
        Solicitudes
      </a>
    </nav>

    <div class="sidebar-footer">
      <button class="logout-btn" (click)="closeSidebar()">
        <img src="/icon/logout.png" alt="">
        Cerrar sesi√≥n
      </button>
    </div>
  </aside>

  <!-- Contenido principal -->
  <main class="content">
    <h2 class="section-title">Recomendaciones</h2>

    <!-- Grid de cards -->
    <div class="grid">
      <article class="card" *ngFor="let t of filtered(); trackBy: trackById">
        <button
          class="fav"
          [class.on]="t.bookmarked"
          (click)="toggleBookmark(t)"
          title="Guardar"
        >
          ‚òÖ
        </button>

        <div class="avatar" [class.has-img]="t.avatarUrl">
          <img *ngIf="t.avatarUrl" [src]="t.avatarUrl" alt="{{ t.name }}">
          <span *ngIf="!t.avatarUrl" aria-hidden="true">üë§</span>
        </div>

        <div class="name">{{ t.name }}</div>
        <div class="sub"><span class="level-chip">{{ t.nivel }}</span></div>

        <div class="tags">
          <span class="tag" *ngFor="let tag of t.tags; trackBy: trackByStr">
            <span class="ico" aria-hidden="true">{{ iconFor(tag) }}</span>
            {{ tag }}
          </span>
        </div>

        <p class="desc">{{ t.description }}</p>

        <div class="actions">
          <button class="see-more">Ver m√°s</button>
        </div>
      </article>
    </div>
  </main>
</section>
